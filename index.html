<!DOCTYPE html>
<html lang="en" ng-app="dbhackathon">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DB Opendata Demo app</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="css/weather-icons.min.css" rel="stylesheet">
		<link href="css/opendatachallenge.css" rel="stylesheet">
		<link href="css/autocomplete.css" rel="stylesheet">
  </head>
  <body id="top">
    <nav class="navbar navbar-inverse navbar-fixed-top" ng-cloak>
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">DB Hackathon</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#top">Suche</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
			<div class="suche" ng-controller="dbhackathonCtrl">
				<form ng-submit="suche()">
					<div class="row">
						<div class="col-md-6">
							<dl>
								<dt>Von:</dt>
								<dd><autocomplete ng-model="von" data="vonList" attr-placeholder="..." on-type="checkVon"></autocomplete></dd>
							</dl>
						</div>
						<div class="col-md-6">
							<dl>
								<dt>Nach:</dt>
								<dd><autocomplete ng-model="nach" data="nachList" attr-placeholder="..." on-type="checkNach"></autocomplete></dd>
							</dl>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6"></div>
						<div class="col-md-6" style="text-align:right;"><input type="submit" value="Suche"></div>
					</div>
				</form>
								
				
				<div ng-show="loadingTrips" class="loader">
					<span class="glyphicon glyphicon-refresh rotate" aria-hidden="true"></span>
				</div>
				
				<div ng-show="trips.length">
					<h1>Ihre Fahrten:</h1>
					<div class="panel-group trips" id="triplist" role="tablist" aria-multiselectable="true">
						<div class="panel panel-default" ng-repeat="trip in trips">
							<div class="panel-heading" role="tab" id="heading{{$index}}">
								<h4 class="panel-title">
									<a data-toggle="collapse" data-parent="#triplist" href="#collapse{{$index}}" aria-expanded="true" aria-controls="collapse{{$index}}">
										<div class="row">
											<div class="col-md-6">{{tag(trip.firstDepartureTime)}} <span class="emph">{{zeit(trip.firstDepartureTime)}}</span> - {{tag(trip.lastArrivalTime)}} <span class="emph">{{zeit(trip.lastArrivalTime)}}</span></div>
											<div class="col-md-6" style="text-align: right;"><span class="duration tripquality{{$index}}">{{duration(trip.publicDuration)}}</span></div>
										</div>
									</a>
								</h4>
							</div>
							<div id="collapse{{$index}}" class="panel-collapse collapse {{$first?'in':''}}" role="tabpanel" aria-labelledby="heading{{$index}}">
								<div class="panel-body">
									<div class="leg" ng-repeat="leg in trip.legs">
										<div class="row">
											<div class="col-md-1">
												<i class="wi {{weatherIcon(trip.from.weather, trip.minTime)}} wi-on-left" ng-show="trip.from.weather&&$first" title="{{weatherInfo(trip.from.weather, trip.maxTime)}}"></i>
											</div>
											<div class="col-md-4">
												<div class="row">
													{{leg.departure.name}} {{leg.departurePosition.name?'-':''}} <span class="emph">{{leg.departurePosition.name?'Gleis':''}} {{leg.departurePosition.name}}</span>
												</div>
												<div class="row">
													<span ng-show="$index!=0" class="glyphicon glyphicon-alert" title="Anschlussfahrt mÃ¶glicherweise nicht erreichbar"></span> {{tag(leg.departureTime)}} <span class="emph">{{zeit(leg.departureTime)}}</span>
												</div>
												
											</div>
											<div class="col-md-2">-</div>
											<div class="col-md-4">
											<div class="row">
												{{leg.arrival.name}} {{leg.arrivalPosition.name?'-':''}} <span class="emph">{{leg.arrivalPosition.name?'Gleis':''}} {{leg.arrivalPosition.name}}</span>
											</div>
											<div class="row">
												{{tag(leg.departureTime)}} <span class="emph">{{zeit(leg.arrivalTime)}}</span>
											</div>
											</div>
											<div class="col-md-1">
												<i class="wi {{weatherIcon(trip.to.weather, trip.maxTime)}} wi-on-right" ng-show="trip.to.weather&&$last" title="{{weatherInfo(trip.to.weather, trip.maxTime)}}"></i>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				
			<!--
				<div class="starter-template">
					<h1>Bootstrap starter template</h1><i class="wi wi-night-thunderstorm"></i>
					<p class="lead">Use this document as a way to quickly start any new project.<br> All you get is this text and a mostly barebones HTML document.</p>
				</div>
				-->
			</div>
		</div>

		<!-- Load scripts-->
		<script src="js/jquery-2.1.3.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/angular.js"></script>
		<script src="js/angular-animate.min.js"></script>
		<script src="js/autocomplete.js"></script>
		<script src="js/opendatachallenge.js"></script>
  </body>
</html>